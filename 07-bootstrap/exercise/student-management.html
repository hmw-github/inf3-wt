<!doctype html>
<html lang="de">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Student Management Dashboard – Bootstrap Übung</title>
  <!-- Bootstrap 5.3 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous">

  <style>
    body {
      background: #f8f9fa;
    }

    .sidebar-card img {
      object-fit: contain;
      height: 160px;
    }

    .statistics-chart {
      width: 80%;
    }
  </style>
</head>

<body>
  <!-- =========================================
    1) CONTAINER & GRID
    - container: äußerer Rahmen
    - row + col-*: Bootstrap Grid für Layout
    ========================================= -->
  <div class="*** schritt 1 *** mt-4">
    <div class="*** schritt 1 *** g-4">

      <!-- Sidebar -->
      <div class="*** schritt 1 ***">
        <!-- Admin-Panel als Karte -->
        <div class="*** schritt 2 *** shadow-sm sidebar-card">
          <img src="person.jpg" alt="Admin-Panel Platzhalter" />
          <div class="*** schritt 2 *** text-center">
            <h5 class="*** schritt 2 *** mb-1">Laura Musterfrau</h5>
            <p class="text-muted mb-3">Administrator</p>
            <!-- BUTTONS: Beispiele für versch. Varianten -->
            <div class="d-grid gap-2">
              <button class="*** schritt 3 ***" type="button">Einstellungen</button>
              <button class="*** schritt 3 ***" type="button">Profil</button>
              <button class="*** schritt 3 ***" type="button">Logout</button>
            </div>
          </div>
        </div>

        <!-- kleine Info-Card -->
        <div class="*** schritt 2 *** mt-4">
          <div class="*** schritt 2 ***">
            <h6 class="mb-2">Hinweis</h6>
            <p class="card-text">
              Dies ist eine Übungsseite für Bootstrap-Komponenten (Container, Grid,
              Tabellen, Buttons, Cards, Tabs, Formulare, Modal).
            </p>
          </div>
        </div>
      </div>

      <!-- Main Content -->
      <div class="*** schritt 1 ***">
        <!-- 3) TABS: Navigation zwischen Ansichten -->
        <ul class="*** schritt 4 ***" id="mainTabs" role="tablist">
          <li class="*** schritt 4 ***" role="presentation">
            <button class="*** schritt 4 ***" id="list-tab" data-bs-toggle="tab"
              data-bs-target="#list-pane" type="button" role="tab">*** schritt 4 ***</button>
          </li>
          <li class="*** schritt 4 ***" role="presentation">
            <button class="nav-link" id="form-tab" data-bs-toggle="tab"
              data-bs-target="#form-pane" type="button" role="tab">*** schritt 4 ***</button>
          </li>
          <li class="*** schritt 4 ***" role="presentation">
            <button class="nav-link" id="stats-tab" data-bs-toggle="tab"
              data-bs-target="#stats-pane" type="button" role="tab">*** schritt 4 ***</button>
          </li>
        </ul>

        <div class="*** schritt 4 *** pt-3" id="mainTabsContent">
          <!-- TAB 1: STUDENTENLISTE -->
          <div class="*** schritt 4 *** fade show active" id="list-pane" role="tabpanel">
            <div class="card shadow-sm">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                  <h5 class="mb-0">Studenten</h5>
                  <div class="btn-group" role="group">
                    <button class="btn btn-outline-primary btn-sm" type="button"
                      id="btnRefresh">Aktualisieren</button>
                    <button class="btn btn-outline-success btn-sm" type="button"
                      id="btnExport">Export</button>
                  </div>
                </div>
                <!-- TABELLE: responsive, striped, hover -->
                <div class="table-responsive">
                  <table class="*** schritt 5 *** align-middle" id="studentsTable">
                    <thead class="table-light">
                      <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Studiengang</th>
                        <th>E-Mail</th>
                        <th class="text-end">Aktionen</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td data-id>1</td>
                        <td>Anna Bauer</td>
                        <td>Informatik</td>
                        <td>anna@uni.de</td>
                        <td class="text-end">
                          <button class="btn btn-primary btn-sm btn-details"
                            data-bs-toggle="modal" data-bs-target="#detailsModal"
                            data-id="1" data-name="Anna Bauer" data-program="Informatik"
                            data-email="anna@uni.de">
                            Details
                          </button>
                        </td>
                      </tr>
                      <tr>
                        <td data-id>2</td>
                        <td>Jonas Klein</td>
                        <td>Maschinenbau</td>
                        <td>jonas@uni.de</td>
                        <td class="text-end">
                          <button class="btn btn-primary btn-sm btn-details"
                            data-bs-toggle="modal" data-bs-target="#detailsModal"
                            data-id="2" data-name="Jonas Klein"
                            data-program="Maschinenbau" data-email="jonas@uni.de">
                            Details
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- TAB 2: NEUER STUDENT (FORMULAR) -->
          <div class="*** schritt 4 *** fade" id="form-pane" role="tabpanel">
            <!-- 6) FORMULARE in einer Card -->
            <div class="card">
              <div class="card-body">
                <h5 class="card-title mb-3">Neuen Studenten anlegen</h5>
                <form id="studentForm" novalidate>
                  <div class="*** schritt 6 *** mb-3">
                      <div class="*** schritt 6 ***">
                        <label for="firstName" class="form-label">Vorname</label>
                        <input type="text" id="firstName" class="form-control" required />
                        <div class="invalid-feedback">Bitte Vornamen angeben.</div>
                      </div>
                      <div class="*** schritt 6 ***">
                        <label for="lastName" class="form-label">Nachname</label>
                        <input type="text" id="lastName" class="form-control" required />
                        <div class="invalid-feedback">Bitte Nachnamen angeben.</div>
                      </div>
                  </div>
                  <div class="*** schritt 6 ***">
                    <div class="*** schritt 6 ***">
                      <label for="program" class="form-label">Studiengang</label>
                      <select id="program" class="form-select" required>
                        <option value="" selected disabled>Bitte wählen…</option>
                        <option>Informatik</option>
                        <option>Maschinenbau</option>
                        <option>BWL</option>
                      </select>
                      <div class="invalid-feedback">Bitte Studiengang auswählen.</div>
                    </div>
                    <div class="*** schritt 6 ***">
                      <label for="email" class="form-label">E-Mail</label>
                      <input type="email" id="email" class="form-control"
                        placeholder="name@beispiel.de" required />
                      <div class="invalid-feedback">Bitte gültige E-Mail angeben.</div>
                    </div>
                  </div>
                  <div class="m-4">
                    <button type="submit" class="btn btn-success">Einreichen</button>
                    <button type="reset" class="btn btn-outline-secondary">Zurücksetzen</button>
                  </div>
                </form>
              </div>
            </div>
          </div>

          <!-- TAB 3: STATISTIKEN (Platzhalter) -->
          <div class="*** schritt 4 *** fade" id="stats-pane" role="tabpanel">
            <div class="card shadow-sm">
              <div class="card-body">
                <h5 class="card-title">Statistiken</h5>
                <p>
                  <img class="statistics-chart" src="chart.jpg">
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL: Detailansicht eines Studenten-Datensatzes -->
  <div class="*** schritt 7 *** fade" id="detailsModal" tabindex="-1">
    <div class="*** schritt 7 ***">
      <div class="*** schritt 7 ***">
        <div class="*** schritt 7 ***">
          <h5 class="modal-title" id="detailsModalLabel">Studentendetails</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"</button>
        </div>
        <div class="*** schritt 7 ***">
          <dl class="row mb-0" id="detailsList">
            <dt class="col-sm-4">ID</dt>
            <dd class="col-sm-8" data-field="id">—</dd>
            <dt class="col-sm-4">Name</dt>
            <dd class="col-sm-8" data-field="name">—</dd>
            <dt class="col-sm-4">Studiengang</dt>
            <dd class="col-sm-8" data-field="program">—</dd>
            <dt class="col-sm-4">E-Mail</dt>
            <dd class="col-sm-8" data-field="email">—</dd>
          </dl>
        </div>
        <div class="*** schritt 7 ***">
          <button type="button" *** schritt 7 ***>Schließen</button>
          <button type="button" class="btn btn-primary">Bearbeiten</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap Bundle inkl. Popper -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

  <!-- JS-Helfer: Validierung, Zeilen hinzufügen, Modal-Daten befüllen -->
  <script>
    // Immediately Invoked Function Expression (IIFE)
    (function () { 
      const form = document.getElementById('studentForm');

      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault(); // Formular-Submit verhindern
          event.stopPropagation(); // event nicht nach oben in DOM-Hierarchie weiterreichen
        } else {
          event.preventDefault(); // Für die Übung: nicht wirklich absenden
          addStudentFromForm();
          // Wechsel automatisch zum Tab "Studentenliste"
          const listTabTrigger = document.querySelector('[data-bs-target="#list-pane"]');
          if (listTabTrigger) {
            new bootstrap.Tab(listTabTrigger).show();
          }
          form.reset();
          form.classList.remove('was-validated');
        }
        form.classList.add('was-validated');
      }, false);
    })();

    // Neue Tabellenzeile aus Formularwerten hinzufügen
    function addStudentFromForm() {
      // Eingaben aus Formular lesen und dabei Leerzeichen entfernen
      const first = 0/* TODO */;
      const last = 0/* TODO */;
      const program = 0/* TODO */;
      const email = 0/* TODO */;

      // table body-Knoten aus DOM holen und Referenz in "tbody" speichern
      const tbody = 0/* TODO */;

      const newId = nextId();
      const name = `${first} ${last}`.trim();

      const tr = document.createElement('tr');
      // tr.innerHTML belegen
      /* TODO */
      tbody.appendChild(tr);
    }

    /**
     * Bestimmt die grösste ID in der Tabelle (1. Spalte) und addiert 1 
     * => ID für neue Zeile
     */ 
    function nextId() {
      const ids = Array.from(document.querySelectorAll('#studentsTable tbody td[data-id]'))
        .map(td => parseInt(td.textContent, 10))
        .filter(n => !Number.isNaN(n));
      return ids.length ? Math.max(...ids) + 1 : 1;
    }

    const detailsModal = document.getElementById('detailsModal');

    // Handler zur dynamischen Befüllung der Modal-Daten setzen
    detailsModal.addEventListener('show.bs.modal', function (event) {
      const button = event.relatedTarget;

      if (!button) 
        return;

      /**
       * Baue ein object namens 'data' auf mit folgenden keys: id: name, program, email
       * Die Daten erhälts du aus dem Button 'button' - siehe die Studententabelle.
       * Mit der Methode getAttribute(<attrName>) kann man den Wert zu einem Attribut aus dem 
       * Button lesen...
       */ 
       /* TODO */

      /*
       * Setze nun die Daten aus 'data' Feld für Feld in die <dd>-Elemente des Modals.
       * Tipp: Zum Finden der dd's wäre z.B. querySelector geeignet, wobei man nach 'data-field'=<id> suchen kann
       */
       /* TODO */
    });

    // Handler für Aktualisieren-Button: ändert die Beschriftung für 1 Sekunde
    // auf 'Aktualisiert' und dann wieder zurück
    document.getElementById('btnRefresh').addEventListener('click', () => {
      const btn = document.getElementById('btnRefresh');
      btn.disabled = true;
      btn.textContent = 'Aktualisiert';

      /* Starte eine Funktion nach einer Sekunde, die den Button 'enabled' und das ursprüngliche Label herstellt
      /* TODO */
    });

    // setze Handler für Export-Button 
    document.getElementById('btnExport').addEventListener('click', () => {
      // Für die Übung nur eine einfache Meldung
      alert('Export gestartet (Demo)');
    });
  </script>
</body>

</html>